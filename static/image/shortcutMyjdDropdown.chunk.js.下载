webpackJsonp([21],{116:function(e,t,n){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function sliceIterator(e,t){var n=[],r=!0,a=!1,o=undefined;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(i){a=!0,o=i}finally{try{!r&&u["return"]&&u["return"]()}finally{if(a)throw o}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=n(0),c=function(e){return e&&e.__esModule?e:{"default":e}}(o),u=n(4),i=n(1),l=function(e){function ShortcutMyjdDropdown(){_classCallCheck(this,ShortcutMyjdDropdown);var e=_possibleConstructorReturn(this,(ShortcutMyjdDropdown.__proto__||Object.getPrototypeOf(ShortcutMyjdDropdown)).apply(this,arguments));return e.state={btUrl:"//baitiao.jd.com",btName:"我的白条"},e}return _inherits(ShortcutMyjdDropdown,e),a(ShortcutMyjdDropdown,[{key:"getHomecount",value:function(){function getHomecount(){return new Promise(function(e,t){(0,i.loadAsync)({url:u.APIS.MYJD_GETHOMECOUNT,name:"jsonpMyJDHomeCount",dataCheck:function(){function dataCheck(e){return!(!e||!e.info)}return dataCheck}()}).then(function(t){var n=t.info,r=n.waitPay,a=n.waitReceive;e(isNaN(r)||isNaN(a)?"":r+a)})["catch"](function(){e("")})})}return getHomecount}()},{key:"getAnswercount",value:function(){function getAnswercount(){return new Promise(function(e,t){(0,i.loadAsync)({url:u.APIS.MYJD_GETMYJDANSWERCOUNT,name:"jsonpMyJDAnswerCount",dataCheck:function(){function dataCheck(e){return!!(e.data&&e.data.success&&e.data.result)}return dataCheck}()}).then(function(t){e(t.data.result.answerCount)})["catch"](function(){e("")})})}return getAnswercount}()},{key:"getReduceproduct",value:function(){function getReduceproduct(){return new Promise(function(e,t){(0,i.loadAsync)({url:u.APIS.MYJD_REDUCEPRODUCTCOUNT,name:"jsonpMyJDReduceProduct",dataCheck:function(){function dataCheck(e){return!(!e||!e.success)}return dataCheck}()}).then(function(t){e(t.data)})["catch"](function(){e("")})})}return getReduceproduct}()},{key:"getCouponcount",value:function(){function getCouponcount(){return new Promise(function(e,t){(0,i.loadAsync)({url:u.APIS.MYJD_GETCOUPONCOUNT,name:"jsonpMyJDGetCouponCount",dataCheck:function(){function dataCheck(e){return!!(e&&"CouponCount"in e)}return dataCheck}()}).then(function(t){e(t.CouponCount)})["catch"](function(){e("")})})}return getCouponcount}()},{key:"getMsgcenter",value:function(){function getMsgcenter(){return new Promise(function(e,t){(0,i.loadAsync)({url:u.APIS.MYJD_MSGCENTER,name:"jsonpMyJDMsgCenter",dataCheck:function(){function dataCheck(e){return!!(e&&"G001001"===e.result&&"msgUnreadCount"in e)}return dataCheck}()}).then(function(t){e(t.msgUnreadCount)})["catch"](function(){e("")})})}return getMsgcenter}()},{key:"getBtlink",value:function(){function getBtlink(){return new Promise(function(e,t){(0,i.getCompanyinfo)().then(function(t){t.isCompany?e({btUrl:"//jc.jd.com",btName:"我的金采"}):(0,i.loadAsync)({url:u.APIS.MYJD_QUERYBT,charset:"utf-8",name:"jsonpMyJDBt",dataCheck:function(){function dataCheck(e){return!!(e&&e.btList&&e.btList[0])}return dataCheck}()}).then(function(t){var n=t.btList[0];e({btUrl:n.btUrl,btName:n.btName})})["catch"](function(){e({btUrl:"//baitiao.jd.com",btName:"我的白条"})})})})}return getBtlink}()},{key:"requestData",value:function(){function requestData(){var e=this,t=function(){function getNumbers(){Promise.all([e.getHomecount(),e.getAnswercount(),e.getReduceproduct(),e.getCouponcount(),e.getMsgcenter(),e.getBtlink()]).then(function(t){var n=r(t,6),a=n[0],o=n[1],c=n[2],u=n[3],i=n[4],l=n[5],s=l.btUrl,d=l.btName;e.setState({homecount:a,answercount:o,reduceproduct:c,couponcount:u,msgcenter:i,btUrl:s,btName:d})})}return getNumbers}();(0,i.getLoginstatus)().then(function(e){e.isLogin&&t()})}return requestData}()},{key:"componentDidMount",value:function(){function componentDidMount(){this.requestData()}return componentDidMount}()},{key:"render",value:function(){function render(){var e=this.state,t=e.homecount,n=e.answercount,r=e.reduceproduct,a=e.couponcount,o=e.msgcenter,u=e.btUrl,i=e.btName;return c["default"].createElement("div",{className:"dd dropdown-layer"},c["default"].createElement("div",{className:"myjdlist"},c["default"].createElement("div",{className:"fore1"},c["default"].createElement("div",{className:"item"},c["default"].createElement("a",{href:"//order.jd.com/center/list.action",target:"_blank"},"待处理订单",c["default"].createElement("span",{className:"shortcut_num style-red"},t))),c["default"].createElement("div",{className:"item"},c["default"].createElement("a",{href:"//myjd.jd.com/afs/indexNew.action?entry=1",target:"_blank"},"返修退换货")),c["default"].createElement("div",{className:"item"},c["default"].createElement("a",{href:"//t.jd.com/product/followProductList.action?isReduce=true",target:"_blank"},"降价商品",c["default"].createElement("span",{className:"shortcut_num style-red"},r)))),c["default"].createElement("div",{className:"fore2"},c["default"].createElement("div",{className:"item"},c["default"].createElement("a",{href:"//joycenter.jd.com/msgCenter/queryHistoryMessage.action",target:"_blank"},"消息",c["default"].createElement("span",{className:"shortcut_num style-red"},o))),c["default"].createElement("div",{className:"item"},c["default"].createElement("a",{href:"http://question.jd.com/myjd/getMyjdAnswerList.action",target:"_blank"},"我的问答",c["default"].createElement("span",{className:"shortcut_num style-red"},n))),c["default"].createElement("div",{className:"item"},c["default"].createElement("a",{href:"//t.jd.com/home/follow",target:"_blank"},"我的关注")))),c["default"].createElement("div",{className:"myjdlist myjdlist_2"},c["default"].createElement("div",{className:"fore1"},c["default"].createElement("div",{className:"item"},c["default"].createElement("a",{href:"//bean.jd.com/myJingBean/list",target:"_blank"},"我的京豆")),c["default"].createElement("div",{className:"item baitiao"},c["default"].createElement("a",{href:u,clstag:"jr|keycount|njdhome|wdbaitiao",target:"_blank"},i))),c["default"].createElement("div",{className:"fore2"},c["default"].createElement("div",{className:"item"},c["default"].createElement("a",{href:"//quan.jd.com/user_quan.action",target:"_blank"},"我的优惠券",c["default"].createElement("span",{className:"shortcut_num style-red"},a))),c["default"].createElement("div",{className:"item"},c["default"].createElement("a",{href:"//trade.jr.jd.com/centre/browse.action",target:"_blank"},"我的理财")))))}return render}()}]),ShortcutMyjdDropdown}(c["default"].Component);t["default"]=l}});